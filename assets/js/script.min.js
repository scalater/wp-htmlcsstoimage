var wpHtmlCssToImageInstance={btnGenerateImageCallBack:function(t,e){let a,n,l=jQuery(t).attr("data-target")||!1,i=jQuery(t).attr("data-have-content")||!1,o=jQuery(t).attr("data-height")||!1,r=jQuery(t).attr("data-width")||!1,s="",c=jQuery(t).find("style");c&&c.length>0&&(s=c.html(),c.remove()),!i&&l?(n=jQuery("#"+l),n&&n.length>0&&(a=n[0].outerHTML,o||(o=wpHtmlCssToImageInstance.getHeight(n)),r||(r=wpHtmlCssToImageInstance.getWidth(n)))):(n=jQuery(t).find("#htmlcsstoimage-content"),n&&n.length>0&&(a=n.html(),o||(o=wpHtmlCssToImageInstance.getHeight(n)),r||(r=wpHtmlCssToImageInstance.getWidth(n)))),n.append("<style>"+s+"</style>"),a?(a=a.replaceAll("castocitycom.local","castocity.com"),wpHtmlCssToImageInstance.postImageCall(a,s,e,o,r)):void 0},getWidth:function(t){if(t)return Math.round(jQuery(t).width())},getHeight:function(t){if(t)return Math.round(jQuery(t).height())},postImageCall:function(t,e,a,n,l){let i=jQuery(a).text();jQuery(a).text("Generating...").attr("disabled","disabled"),jQuery.ajax({type:"POST",dataType:"json",url:wpHtmlCssToImageObj.admin_url,data:{action:"post_htmlcsstoimage",nonce:wpHtmlCssToImageObj.nonce,html:t,css:e,dataHeight:n,dataWidth:l},success:function(t){if(void 0,t&&200===t.data.code&&t.data.url){let e=".png";(n||l)&&(e+="?",n&&l?e+="height="+n+"&width="+l:n&&!l?e+="height="+n:!n&&l&&(e+="width="+l)),window.open(t.data.url+e+"&dl=1","_blank")}},error:function(t,e,a){void 0},complete:function(){jQuery(a).text(i).removeAttr("disabled")}})},init:function(){let t=jQuery(".htmlcsstoimage-container");t&&t.length>0&&jQuery.each(t,(function(t,e){let a=jQuery(e),n=a.find("a.create-image");n&&n.length>0&&n.on("click",(function(t){if(t.preventDefault(),n.attr("disabled")||!1)return!1;wpHtmlCssToImageInstance.btnGenerateImageCallBack(a,n)}))}))}};jQuery(document).ready((function(){wpHtmlCssToImageInstance.init()}));