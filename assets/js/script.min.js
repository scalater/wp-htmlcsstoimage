var wpHtmlCssToImageInstance={btnGenerateImageCallBack:function(t,e){let a,n,i=jQuery(t).attr("data-target")||!1,l=jQuery(t).attr("data-have-content")||!1,r=jQuery(t).attr("data-height")||!1,s=jQuery(t).attr("data-width")||!1,o=jQuery(t).attr("data-entry-id")||!1,c=jQuery(t).find('input[type="hidden"]')||!1;c&&c.val()&&(c=JSON.parse(c.val()));let d="",u=jQuery(t).find("style");u&&u.length>0&&(d=u.html(),u.remove()),!l&&i?(n=jQuery("#"+i),n&&n.length>0&&(a=n[0].outerHTML,r||(r=wpHtmlCssToImageInstance.getHeight(n)),s||(s=wpHtmlCssToImageInstance.getWidth(n)))):(n=jQuery(t).find("#htmlcsstoimage-content"),n&&n.length>0&&(a=n.html(),r||(r=wpHtmlCssToImageInstance.getHeight(n)),s||(s=wpHtmlCssToImageInstance.getWidth(n)))),n.append("<style>"+d+"</style>"),a?(a=a.replaceAll("castocitycom.local","castocity.com"),wpHtmlCssToImageInstance.postImageCall(a,d,e,r,s,o,c)):void 0},getWidth:function(t){if(t)return Math.round(jQuery(t).width())},getHeight:function(t){if(t)return Math.round(jQuery(t).height())},postImageCall:function(t,e,a,n,i,l,r){let s,o,c,d,u=jQuery(a).html();jQuery(a).html('<i class="fas fa-spinner fa-spin"></i>').attr("disabled","disabled"),r&&(s=r.subject||!1,o=r.type||!1,c=r.podcast_id||!1,d=r.orientation||!1),jQuery.ajax({type:"POST",dataType:"json",url:wpHtmlCssToImageObj.admin_url,data:{action:"post_htmlcsstoimage",nonce:wpHtmlCssToImageObj.nonce,html:t,css:e,dataHeight:n,dataWidth:i,entry:l,subject:s,type:o,podcast_id:c,orientation:d},success:function(t){if(void 0,t&&200===t.data.code&&t.data.url){let e=".png";(n||i)&&(e+="?",n&&i?e+="height="+n+"&width="+i:n&&!i?e+="height="+n:!n&&i&&(e+="width="+i)),window.open(t.data.url+e+"&dl=1","_blank")}},error:function(t,e,a){void 0},complete:function(){jQuery(a).html(u).removeAttr("disabled")}})},init:function(){let t=jQuery(".htmlcsstoimage-container");t&&t.length>0&&jQuery.each(t,(function(t,e){let a,n=jQuery(e),i=n.attr("data-trigger-id");if(i){let t=jQuery("#"+i);t&&t.length>0&&(a=t)}a||(a=n.find("a.create-image"),a.show()),a&&a.length>0&&a.on("click",(function(t){if(t.preventDefault(),a.attr("disabled")||!1)return!1;wpHtmlCssToImageInstance.btnGenerateImageCallBack(n,a)}))}))}};jQuery(document).ready((function(){wpHtmlCssToImageInstance.init()}));