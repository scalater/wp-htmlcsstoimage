var wpHtmlCssToImageInstance={btnGenerateImageCallBack:function(t,e){let a,n,l=jQuery(t).attr("data-target")||!1,i=jQuery(t).attr("data-have-content")||!1,s=jQuery(t).attr("data-height")||!1,r=jQuery(t).attr("data-width")||!1,o="",c=jQuery(t).find("style");c&&c.length>0&&(o=c.html(),c.remove()),!i&&l?(n=jQuery("#"+l),n&&n.length>0&&(a=n[0].outerHTML,s||(s=wpHtmlCssToImageInstance.getHeight(n)),r||(r=wpHtmlCssToImageInstance.getWidth(n)))):(n=jQuery(t).find("#htmlcsstoimage-content"),n&&n.length>0&&(a=n.html(),s||(s=wpHtmlCssToImageInstance.getHeight(n)),r||(r=wpHtmlCssToImageInstance.getWidth(n)))),n.append("<style>"+o+"</style>"),a?(a=a.replaceAll("castocitycom.local","castocity.com"),wpHtmlCssToImageInstance.postImageCall(a,o,e,s,r)):void 0},getWidth:function(t){if(t)return Math.round(jQuery(t).width())},getHeight:function(t){if(t)return Math.round(jQuery(t).height())},postImageCall:function(t,e,a,n,l){let i=jQuery(a).html();jQuery(a).html('<i class="fas fa-spinner fa-spin"></i>').attr("disabled","disabled"),jQuery.ajax({type:"POST",dataType:"json",url:wpHtmlCssToImageObj.admin_url,data:{action:"post_htmlcsstoimage",nonce:wpHtmlCssToImageObj.nonce,html:t,css:e,dataHeight:n,dataWidth:l},success:function(t){if(void 0,t&&200===t.data.code&&t.data.url){let e=".png";(n||l)&&(e+="?",n&&l?e+="height="+n+"&width="+l:n&&!l?e+="height="+n:!n&&l&&(e+="width="+l)),window.open(t.data.url+e+"&dl=1","_blank")}},error:function(t,e,a){void 0},complete:function(){jQuery(a).html(i).removeAttr("disabled")}})},init:function(){let t=jQuery(".htmlcsstoimage-container");t&&t.length>0&&jQuery.each(t,(function(t,e){let a,n=jQuery(e),l=n.attr("data-trigger-id");if(l){let t=jQuery("#"+l);t&&t.length>0&&(a=t)}a||(a=n.find("a.create-image"),a.show()),a&&a.length>0&&a.on("click",(function(t){if(t.preventDefault(),a.attr("disabled")||!1)return!1;wpHtmlCssToImageInstance.btnGenerateImageCallBack(n,a)}))}))}};jQuery(document).ready((function(){wpHtmlCssToImageInstance.init()}));